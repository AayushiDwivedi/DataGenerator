

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Hadoop Usage &mdash; Data Generator 2.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Data Generator 2.0 documentation" href="index.html" />
    <link rel="next" title="SCXML Data Models" href="SCXMLDataModels.html" />
    <link rel="prev" title="Multithreaded Usage" href="Multithreaded.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="SCXMLDataModels.html" title="SCXML Data Models"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Multithreaded.html" title="Multithreaded Usage"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Data Generator 2.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="hadoop-usage">
<h1>Hadoop Usage<a class="headerlink" href="#hadoop-usage" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Using DataGenerator with Hadoop is similar to using the DataGenerator multithreaded. All that changes is distributing the Frontiers produced by SCXMLEngine.</p>
<p>Prepare an SCXMLEngine as one woould for using DataGenerator multithreaded, setting the model by String or InputStream and setting the desired amount of bootstrap. Then, instead of having SCXMLEngine process with a DefaultDistributor, process with a custom HadoopDistributor. This HadoopDistributor will distribute the Frontiers by making a Hadoop mapper for each Frontier and having the mappers perform the subsequent searchs on the Frontiers. The easiest way is to have each mapper make its own DefaultDistributor to handle the search. In essence one is splitting the distributing of Frontiers across many DefaultDistributors on many machines.</p>
<p>The dg-example-hadoop module provides a complete demonstration, following the outline above, of using DataGenerator in conjunction with Hadoop.</p>
</div>
<div class="section" id="scxmlgapper">
<h2>SCXMLGapper<a class="headerlink" href="#scxmlgapper" title="Permalink to this headline">¶</a></h2>
<p>The custom HadoopDistributor can not directly give Frontiers to the mappers; memory is not shared between them. The HadoopDistributor must serialize the Frontiers into lines of text and write these lines out as input problems for the mappers. Mappers will have to rebuild their respective Frontiers from these serialized lines. The SCXMLGapper class makes serializng and rebuilding Frontiers easy; consult dg-example-hadoop to see it in use.</p>
</div>
<div class="section" id="contextwriter">
<h2>ContextWriter<a class="headerlink" href="#contextwriter" title="Permalink to this headline">¶</a></h2>
<p>ContextWriter is a DataWriter implementation that will write output lines to an Hadoop provided Context. The class is usable as is and can be found in dg-example-hadoop. The mapper will need to pass the Context to the desired DataConsumer to make the ContextWriter with.</p>
</div>
<div class="section" id="workmanager">
<h2>WorkManager<a class="headerlink" href="#workmanager" title="Permalink to this headline">¶</a></h2>
<p>None of the individual mappers can directly communicate with one another, which can be problematic if they need to share resources or have collective stopping conditions like an overall line count target.</p>
<p>A WorkManager is a class that establishes a server to handle communications with mappers. A WorkManager can provide mappers with resources or status updates the mappers need, can handle status updates and requests from the mappers, and can provide the user with progress reports on the mappers.</p>
<div class="section" id="communicating-with-the-workmanager">
<h3>Communicating with the WorkManager<a class="headerlink" href="#communicating-with-the-workmanager" title="Permalink to this headline">¶</a></h3>
<p>DataConsumers (each mapper and its DefaultDistributor should have one) can communicate with the WorkManager using the DataConsumer&#8217;s sendRequest and sendRequestSync methods. What requests to send to the WorkManager, and what to expect as a response depends on the WorkManager.</p>
<p>Once instantiated the WorkManager method prepareServer() will make the WorkManager start listening for DataConsumer requests. The method prepareStatus() will make the WorkManager provide status reports on the mappers.</p>
<p>DataConsumers must be told the reporting host that corresponds to the WorkManager in order to communicate with the WorkManager. The getListeningPort() and getHostName() methods of WorkManager will provide the needed information.</p>
</div>
<div class="section" id="default-workmanagers">
<h3>Default WorkManagers<a class="headerlink" href="#default-workmanagers" title="Permalink to this headline">¶</a></h3>
<p>The dg-example-hadoop module comes with two interfaces, WorkManager and WorkBlock, the JettyManager implementation of WorkManager, its extension LineManager, and the LineBlock implementation of WorkBlock.</p>
<p>JettyManager uses Jetty as the server to handle communications. LineManager extends JettyManager to handle an overall line count target, telling mappers when to shutdown based on the total number of lines all mappers have written.</p>
</div>
<div class="section" id="make-your-own-workmanager">
<h3>Make Your Own WorkManager<a class="headerlink" href="#make-your-own-workmanager" title="Permalink to this headline">¶</a></h3>
<p>One can make their own WorkManager using their desired server or to manage any desired kind of shared resource between the mappers. JettyManager is agnostic towards the kind of WorkBlock it manages. If jetty is an acceptable server, new resources can be managed with a simple WorkBlock implementation, just like LineBlock.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Hadoop Usage</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#scxmlgapper">SCXMLGapper</a></li>
<li><a class="reference internal" href="#contextwriter">ContextWriter</a></li>
<li><a class="reference internal" href="#workmanager">WorkManager</a><ul>
<li><a class="reference internal" href="#communicating-with-the-workmanager">Communicating with the WorkManager</a></li>
<li><a class="reference internal" href="#default-workmanagers">Default WorkManagers</a></li>
<li><a class="reference internal" href="#make-your-own-workmanager">Make Your Own WorkManager</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="Multithreaded.html"
                        title="previous chapter">Multithreaded Usage</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="SCXMLDataModels.html"
                        title="next chapter">SCXML Data Models</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/Hadoop.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="SCXMLDataModels.html" title="SCXML Data Models"
             >next</a> |</li>
        <li class="right" >
          <a href="Multithreaded.html" title="Multithreaded Usage"
             >previous</a> |</li>
        <li><a href="index.html">Data Generator 2.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, DataGenerator Contributors.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>